#!/bin/bash

set +x

STARS_HOME=/Users/scox/dev
DATA_HOME=$STARS_HOME/chemotext/data

SPARK_HOME=$STARS_HOME/spark/current
MESOS_MASTER=local[2]

#source $STARS_HOME/app/evry/conf/env.sh
APP_HOME=$STARS_HOME/chemotext
#APP_HOME=$STARS_HOME/tmChemM1-0.0.2

MESHXML=$STARS_HOME/data/pubmed/mesh/desc2016_2.xml
FRAMEWORK_NAME="Chemotext:Pipeline[Scala]"

# config/banner_JOINT_SAMPLE.xml

p0 () {
    LEXER_CONFIGPATH=$STARS_HOME/data/tmchem/config/banner_JOINT_dev.xml
    LEXER_CACHEFILE=$STARS_HOME/data/tmchem/cacheFile.tsv
    LEXER_DICTIONARY=$STARS_HOME/data/tmchem/data/dict.txt
}

p1 () {
    LEXER_CONFIGPATH=$APP_HOME/config/banner_JOINT_SAMPLE.xml
    LEXER_CACHEFILE=$APP_HOME/cacheFile.tsv
    LEXER_DICTIONARY=$APP_HOME/data/dict.txt
}

p0
echo $PUBMEDC

cd $STARS_HOME/data/tmchem
export JAVA_OPTS="-Xmx10G -Xms10G"
scala -classpath \
    $(find $STARS_HOME/chemotext -name "*assembly*.jar" -print | grep scala ) \
    org.chemotext.TmChemLexerApp \
    $LEXER_CONFIGPATH \
    $LEXER_CACHEFILE \
    $LEXER_DICTIONARY \
    "$1"
